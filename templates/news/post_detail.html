<!-- templates/news/post_default.html -->
<!-- вывод одного поста -->

{% extends 'flatpages/default.html' %}

<!-- подключить фильтры -->
{% load custom_filters %}

<!-- заголовок на вкладке -->
{% block title %}
    {% if post_mode == 'delete' %}
        Удалить
    {% else %}
        {% if post.isNews %}
            Новость
        {% else %}
            Статья
        {% endif %}
    {% endif %}
{% endblock title %}

<!-- кнопки навигации справа -->
{% block navbar_right %}
<li class="nav_item">
    <a class="nav-link"
       {% if post.isNews %}
            href="/news/{{ post.id }}/edit/"
       {% else %}
            href="/article/{{ post.id }}/edit/"
       {% endif %}
    >
        Изменить
    </a>
</li>

<li class="nav_item">
    <a class="nav-link {% if post_mode == 'delete' %}active{% endif %}"
       {% if post.isNews %}
            href="/news/{{ post.id }}/delete/"
       {% else %}
            href="/article/{{ post.id }}/delete/"
       {% endif %}
    >
        Удалить
    </a>
</li>
{% endblock navbar_right %}

<!-- заголовок содержимого страницы -->
{% block content_title %}
    {% if post.isNews %}
        <h3>Новость</h3>
    {% else %}
        <h3>Статья</h3>
    {% endif %}
    <!-- разделитель -->
    <hr>
{% endblock content_title %}

<!-- содержимое страницы -->
{% block content %}
    <form action="" method="post">
        {% csrf_token %}
            <table border="1" cellpadding="10" rules="all" class="table table-striped table-sm">
                <tr><th>Автор</th>    <td>{{ post.author.user.username }}</td></tr>
                <tr><th>Категория</th><td>{{ cats }}</td></tr>
                <tr><th>Название</th> <td>{{ post.title }}</td>               </tr>
                <tr><th>Текст</th>    <td>{{ post.text|censor_filter }}</td>  </tr>
                <tr><th>Дата</th>     <td>{{ post.time_in|date:'d M Y' }}</td></tr>
                <tr><th>Рейтинг</th>  <td><input type="submit" name="dislike" value="-" />
                                          {{ post.rating }}
                                          <input type="submit" name="like" value="+" />
                                      </td>
                </tr>
            </table>
        <!-- управление подпиской при просмотре поста -->
        {% if post_mode == 'view' %}
            <br>
            <input class="btn btn-outline-primary btn-xs"
                   type="submit"
                   name="subscribe"
                   value="Подписаться на эти категории"/>
        {% endif %}

        <!-- удаление -->
        {% if post_mode == 'delete' %}
            <br>
            <input class="btn btn-outline-primary btn-sm"
                   type="submit"
                   value="Удалить"/>
        {% endif %}
    </form>

{{ context }}

{% endblock content %}
